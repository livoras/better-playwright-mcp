SmartOutline 的核心意图

  这个模块的根本目标是：在有限的 token 窗口内，让 AI 理解网页的完整结构。

  核心挑战

  网页 HTML 快照通常有几千行，而 AI 的上下文窗口有限。简单截断会丢失重要信息，全部传输会超出限制。

  解决思路

  1. 智能压缩而非暴力截断
  - 不是简单地截取前 200 行
  - 而是从 3000+ 行中提取最有价值的 200 行
  - 保留页面的逻辑结构和层次关系

  2. 模式识别与折叠
  - 识别重复元素（如商品列表、搜索结果）
  - 展示第一个作为样本，其余折叠成 "... and 49 more similar"
  - AI 能理解"这里有 50 个相似的产品"，而不需要看到全部 50 个

  3. 优先级系统
  - searchbox、navigation = 最高优先级（用户交互入口）
  - heading、button、link = 高优先级（页面骨架）
  - generic、separator = 低优先级（装饰性元素）
  - 确保重要元素一定会被包含

  4. 三层渐进式构建
  - 骨架层（30%空间）：页面主要结构
  - 模式层：折叠的重复组
  - 细节层：剩余空间填充高优先级元素

  设计哲学

  这不是一个"摘要"算法，而是一个**"智能采样"**算法：
  - 保留足够信息让 AI 能定位任何元素
  - 通过 ref 系统提供精确的操作锚点
  - 平衡全局视图和局部细节

  本质上，这是在解决一个信息论问题：如何用最少的比特传递最多的结构信息。通过识别冗余（重复模式）并压缩它们，
  为真正独特的内容腾出空间。
